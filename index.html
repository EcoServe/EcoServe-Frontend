<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>EcoServe Frontend</title>
    <style>
      body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0b0b0b;color:#e8e8e8}
      header,main{max-width:900px;margin:0 auto;padding:20px}
      .tag{display:inline-block;background:#1b1b1b;border:1px solid #2d2d2d;padding:6px 10px;border-radius:999px;font-size:.9rem}
      .ok{color:#00c853}.bad{color:#ff5252}
      code{background:#111;border:1px solid #222;padding:2px 6px;border-radius:6px}
      a{color:#00e5ff}
    </style>
  </head>
  <body>
    <header>
      <h1>EcoServe Frontend</h1>
      <div id="status" class="tag">Checking backend…</div>
    </header>
    <main>
      <p>This site is deployed on Vercel. Backend should be reachable at:</p>
      <p><code id="api"></code></p>
      <p>Try the public API endpoints from here:</p>
      <ul>
        <li><a id="healthLink" target="_blank" rel="noreferrer">/healthz</a></li>
        <li><a id="authLink"   target="_blank" rel="noreferrer">/api/auth</a></li>
      </ul>
    </main>

    <script>
      // Hardcode your backend URL (Render) here:
      const BACKEND = "https://ecoserve-backend.onrender.com"; // ← replace with your actual Render URL

      document.getElementById("api").textContent = BACKEND;
      document.getElementById("healthLink").href = BACKEND + "/healthz";
      document.getElementById("authLink").href   = BACKEND + "/api/auth";

      (async () => {
        const badge = document.getElementById("status");
        try {
          const r = await fetch(BACKEND + "/healthz", { cache: "no-store" });
          if (r.ok) {
            badge.textContent = "Backend OK";
            badge.classList.add("ok");
          } else {
            badge.textContent = "Backend reachable, but /healthz not OK (" + r.status + ")";
            badge.classList.add("bad");
          }
        } catch (e) {
          badge.textContent = "Backend unreachable";
          badge.classList.add("bad");
        }
      })();
    </script>
  </body>
</html>
